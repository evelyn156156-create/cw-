# 修复 "添加信息源失败" 问题指南

我已经修改了代码，现在即使某些 RSS 源暂时无法连接（例如因为网络原因），您也可以成功添加它们。系统会自动标记为“异常”，您可以稍后在列表中点击“测试连接”按钮进行重试。

## 如何应用修复

请连接到您的服务器终端，执行以下步骤：

### 1. 进入项目目录
```bash
cd /root/cw-
```

### 2. 获取最新代码 (如果您使用 Git)
*(如果您是直接修改文件，请跳过此步)*
```bash
git pull
```

### 3. 重新部署
运行之前创建的一键部署脚本：

```bash
bash redeploy.sh
```

或者手动执行：
```bash
# 停止旧服务
pm2 stop my-ai-bot
pm2 delete my-ai-bot

# 重新安装依赖 (确保 rss-parser 配置生效)
npm install

# 重新编译前端
npm run build

# 启动服务
pm2 start npm --name "my-ai-bot" -- start
pm2 save
```

## 验证修复

1. 打开网站，进入 **"信源与设置"** 页面。
2. 尝试添加一个之前失败的 RSS 源。
3. 如果添加成功但连接失败，系统会提示 **"⚠️ 添加成功但连接失败"**，并且该源会出现在列表中，状态显示为红色异常。
4. 您可以点击该源旁边的 **"测试连接"** 按钮进行重试。

## 常见问题

**Q: 为什么有些源还是显示异常？**
A: 可能是因为服务器网络无法访问该源（例如被墙），或者该源开启了反爬虫保护。我已经优化了爬虫配置（模拟浏览器 User-Agent），应该能解决部分反爬问题。

**Q: 如何批量重试？**
A: 点击页面上的 **"一键添加所有未添加项"**，或者在列表中点击红色的异常源进行单独测试。
